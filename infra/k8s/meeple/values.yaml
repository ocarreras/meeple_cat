namespace: meeple

domain: play.meeple.cat
bareDomain: meeple.cat

backend:
  image: ghcr.io/ocarreras/meeple-backend:latest
  replicas: 1
  port: 8000
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: "1"
      memory: 512Mi
  terminationGracePeriodSeconds: 30

frontend:
  image: ghcr.io/ocarreras/meeple-frontend:latest
  replicas: 1
  port: 3000
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi

postgres:
  image: postgres:16-alpine
  storage: 10Gi
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: "1"
      memory: 1Gi

redis:
  image: redis:7-alpine
  maxmemory: 256mb
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 500m
      memory: 384Mi

gameEngine:
  enabled: true
  image: ghcr.io/ocarreras/meeple-game-engine:latest
  replicas: 1
  port: 50051
  resources:
    requests:
      cpu: 100m
      memory: 64Mi
    limits:
      cpu: "2"
      memory: 256Mi
  # Bot profiles TOML — mounted as /etc/meeple/bot_profiles.toml
  # Update here and `helm upgrade` to change bot configs without image rebuild.
  botProfiles: |
    [profiles.easy]
    description = "Easy bot — no heuristic eval, score-diff only"
    strategy_type = "mcts"
    num_simulations = 100
    time_limit_ms = 1000
    num_determinizations = 2
    eval_profile = ""

    [profiles.medium]
    description = "Medium difficulty — v1 evaluator with default weights"
    strategy_type = "mcts"
    num_simulations = 300
    time_limit_ms = 3000
    num_determinizations = 3
    eval_profile = "default"

    [profiles.hard]
    description = "Hard — v2 evaluator (unified score space)"
    strategy_type = "mcts"
    num_simulations = 800
    time_limit_ms = 5000
    num_determinizations = 5
    [profiles.hard.eval_weights]
    score_scale = -10.0
    score_base = 0.0
    score_delta = 0.0
    potential_base = 0.0
    potential_delta = 0.0
    potential_scale = 0.0
    meeple_base = 0.0
    meeple_delta = 0.0
    meeple_hoard_threshold = 0
    meeple_hoard_penalty = 0.0
    meeple_hoard_progress_gate = 0.0
    field_base = 0.0
    field_delta = 0.0
    field_scale = 0.0

    [production]
    easy = "easy"
    medium = "medium"
    hard = "hard"
    default = "hard"

ingress:
  enabled: true
  className: traefik
  tls: true
  clusterIssuer: letsencrypt-prod

# Placeholder values — override with values-prod.yaml (gitignored)
secrets:
  databasePassword: ""
  jwtSecret: ""
  googleClientId: ""
  googleClientSecret: ""

backup:
  enabled: true
  schedule: "0 3 * * *"
  hostPath: /var/lib/meeple/backups
  retentionDays: 7
